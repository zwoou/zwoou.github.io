---
title: springboot集成activemq笔记 
tags:
    - activemq
    - springboot
---

## 1. 下载

[http://activemq.apache.org](http://activemq.apache.org)

## 2. springboot中配置 

1. maven配置

```xml
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-activemq</artifactId>
		</dependency>
```

application.properties

---------------------

2. application.properties配置

   ```properties
   ## URL of the ActiveMQ broker. Auto-generated by default. For instance `tcp://localhost:61616`
   # failover:(tcp://localhost:61616,tcp://localhost:61617)
   # tcp://localhost:61616
   spring.activemq.broker-url=tcp://localhost:61616
   spring.activemq.in-memory=true  
   spring.activemq.pool.enabled=false  

   ```

3. 如果使用线程池

   ```properties
   spring.activemq.pool.enabled=true
   spring.activemq.pool.max-connections=100
   ```

   maven

   ```xml
   		<dependency>
   			<groupId>org.apache.activemq</groupId>
   			<artifactId>activemq-pool</artifactId>
   		</dependency>
   ```

   ​

## 3. 消息生产者 

```java
package bid.woou.activemqdemo;

import org.apache.activemq.command.ActiveMQQueue;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jms.core.JmsMessagingTemplate;
import org.springframework.stereotype.Service;

import javax.jms.Destination;

/**
 * @Author: zwoou
 * @Date: 2018/9/22
 */
@Service
public class Producer {

    @Autowired
    private JmsMessagingTemplate jmsMessagingTemplate;

    public void sendMessage(String destinationName, String message) {
        Destination destination = new ActiveMQQueue(destinationName);
        System.out.println("发送消息：" + message);
       jmsMessagingTemplate.convertAndSend(destination, message);
    }

}
```

## 4. 消费者

```java
package bid.woou.activemqdemo;

import org.springframework.jms.annotation.JmsListener;
import org.springframework.stereotype.Component;

/**
 * @Author: zwoou
 * @Date: 2018/9/22
 */
@Component
public class Consumer {
    @JmsListener(destination = "mytest")
    public void receiveQueqe(String text){
        System.out.println("接受到："+text);
    }
}

```

## 5. 配置

|1. 端口配置

调整连接端口，找到如下文件
修改<transportConnectors>节点下内容即可，本次我们修改为61626，故同步调整application.properties中地址spring.activemq.broker-url=tcp://localhost:61626；
调整监控系统端口，找到jetty.xml文件，修改如下节点：
调整监控登录用户名密码，找到jetty-realm.properties文件按照如下格式修改即可：

## 参考

- [https://blog.csdn.net/songhaifengshuaige/article/details/54176520](https://blog.csdn.net/songhaifengshuaige/article/details/54176520)
- [https://blog.csdn.net/liuchuanhong1/article/details/54603546](https://blog.csdn.net/liuchuanhong1/article/details/54603546)